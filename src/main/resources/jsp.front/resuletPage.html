<!doctype html>
<html lang="zh_CN">
<head>
    <meta charset="UTF-8">
    <title>拾光有声明信片</title>
    <meta name="Description" content="">
    <meta name="Keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="apple-mobile-web-app-title" content=""/>
    <meta name="apple-touch-fullscreen" content="YES" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="HandheldFriendly" content="true" />
    <meta http-equiv="x-rim-auto-match" content="none" />
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" href="css/style.css?v=1.1" type="text/css">
    <link rel="stylesheet" href="css/animate.css?v=1.1" type="text/css">
    <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    <script type="text/javascript" src="js/mobile.js"></script>
</head>
<body>
    <div class="wrap">
        <div class="screen">
            <div class="page firstpage">
                <div class="layer">
                    <div class="support">
                        <img src="img/support.png">
                    </div>
                </div>
                <div class="layer">
                    <div class="clearfix">
                        <div class="logo" style="    margin-top: 5%;">
                            <img src="img/logo.png">
                        </div>
                        <div class="nickName fl">
                            <span>仲夏夜</span> <span>制作的明信片</span>
                        </div>
                    </div>
                    <div class="pictureBox">
                        <img src="img/pictureBox.png">
                        <div class="nextBtn J_nextBtn" style="right: 6%;">
                            <img src="img/nextBtn.png">
                        </div>
                        <div class="moveBox" style="z-index: 2">
                            <div class="BigPic">
                                <img src="img/BigPic.jpg">
                            </div>
                            <div class="audio J_audio">
                                <img src="img/music.png">
                            </div>
                        </div>
                        <div class="moveBox" style="z-index: 1">
                            <div class="BigPic">
                                <img src="img/BigPic2.jpg">
                            </div>
                            <div class="face" style="left: 5%;top: 2%;">
                                <img src="img/face0.png" style="display: block">
                                <img src="img/face1.png" >
                                <img src="img/face2.png" >
                                <img src="img/face3.png" >
                                <img src="img/face4.png" >
                                <img src="img/face5.png" >
                                <img src="img/face6.png" >
                                <img src="img/face7.png" >
                                <img src="img/face8.png" >
                                <img src="img/face9.png" >
                                <img src="img/face10.png" >
                                <img src="img/face11.png" >
                                <img src="img/face12.png" >
                                <img src="img/face13.png" >
                                <img src="img/face14.png" >
                            </div>
                        </div>

                        <div class="homePage " style="left: 0;right: 0;margin: auto">
                            <a href="index.html"><img src="img/homePage.png"></a>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
<script type="text/javascript">
    $(function() {
        var winSize = getWinSize(), winWidth = winSize[0] > 640 ? 640 : winSize[0], winHeight = winSize[1],
                scale = winWidth / 640, isAnimated = false, minHeight = 1008 * scale, animateTime = 800;



        // 设置页面高度
        $('.page').height(winHeight).eq(0).css({display: 'block', zIndex: 1});

        $('.page').on('in', function() {
            isAnimated = true;
            var page = this;
            var maxDaley = 0;
            $('.animated', this).each(function() {
                var animate = $(this).data('a'),
                        daley = $(this).data('d'),
                        self = this;
                daley = daley || 0;

                if (daley > maxDaley) {
                    maxDaley = daley;
                }

                setTimeout(function() {
                    $(self).css({opacity: 1}).addClass(animate);
                    setTimeout(function() {
                        $(self).removeClass(animate);
                    }, 1000);
                }, daley);
            });

            if ($('.animated', this).length) {
                setTimeout(function() {
                    isAnimated = false;
                }, maxDaley + 700);
            } else {
                setTimeout(function() {
                    isAnimated = false;
                }, 100);
            }

        }).on('out', function() {
            $('.animated', this).css({opacity: 0});
        }).on('readyRun', function() {
            $(this).trigger('out');
        }).trigger('readyRun');

        $('.page').loadImages({loadHtml: '<div class="layer loadLayer"><div class="loading"><div class="wText">loading</div><div class="wBall" id="wBall_1"><div class="wInnerBall"></div></div><div class="wBall" id="wBall_2"><div class="wInnerBall"></div></div><div class="wBall" id="wBall_3"><div class="wInnerBall"></div></div><div class="wBall" id="wBall_4"><div class="wInnerBall"></div></div><div class="wBall" id="wBall_5"><div class="wInnerBall"></div></div></div></div>',
            callback: function() {
                $('.loadLayer', this).hide();
                if ($(this).hasClass('firstpage')) {
                    $(this).trigger('in');
                }
            }
        });
        var index = 0;
        var length = $('.moveBox').length;
        $('.J_nextBtn').tap(function(){
            if(!isAnimated){
                isAnimated = true;
                    if (index + 1 > length) {
                        index = 0;
                    }
                    $('.moveBox').eq(index).css({opacity:1}).animate({opacity:0},700);
                    $('.moveBox').eq((index+1)%length).css({opacity:0}).animate({opacity:1},700,function(){
                        isAnimated = false;
                    });
                    index++;

            }
        })


    });
</script>
</body>
</html>